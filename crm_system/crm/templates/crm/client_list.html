{% extends 'crm/base.html' %}

{% block content %}
<h1>Клиенты</h1>

<!-- Список клиентов -->
<ul>
    {% for client in clients %}
    <li>
        <strong>{{ client.name }}</strong> - {{ client.email }}<br>
        <em>Телефон:</em> {{ client.phone|default:"не указан" }}<br>
        <em>Адрес:</em> {{ client.address|default:"не указан" }}<br>

        <!-- Кнопка для удаления клиента -->
        <form action="{% url 'delete_client' client.id %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit">Удалить</button>
        </form>
    </li>
    {% endfor %}
</ul>

<!-- Форма для добавления нового клиента -->
<h2>Добавить нового клиента</h2>
<form action="{% url 'add_client' %}" method="post">
    {% csrf_token %}
    <label for="name">Имя:</label>
    <input type="text" id="name" name="name" required><br>
    
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br>
    
    <label for="phone">Телефон:</label>
    <input type="text" id="phone" name="phone"><br>
    
    <label for="address">Адрес:</label>
    <textarea id="address" name="address"></textarea><br>
    
    <button type="submit">Добавить</button>
</form>

{% endblock %}
